{% extends 'index.html' %}

{% block content %}
<h1>Chatbot</h1>

<div id="chat-container">
    {% for message in chat_history %}
    <div class="{% if message.isBot %}chatbot-message{% else %}user-message{% endif %}">
        <p>{{ message.message }}</p>
        <p>{{ message.timestamp }}</p>
    </div>
    {% endfor %}

    <!-- {% if new_message %}
    <div class="chatbot-message">
        <p>{{ new_message }}</p>
        <p>{{ now }}</p>
    </div>
    {% endif %} -->
    <!-- For testing -->
    <!-- {% if user_message %}
    <div class="user-message">
        <p>{{ user_message }}</p>
        <p>{{ now }}</p>
    </div>
    {% endif %} -->
</div>

<form method="post" action="{% url 'chat' %}">
    {% csrf_token %}
    <input type="text" name="user_message" autofocus>
    <input type="submit" value="Send">
</form>
<p>Logged in as {{ user }}</p>
<p><a href="{% url 'logout' %}">Log out</a></p>

<!-- <script>
    // todo: send message
</script> -->
{% endblock %}